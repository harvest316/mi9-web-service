<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: tests/data/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: tests/data/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*jslint node: true */
'use strict';
var _ = require('underscore');
var sampleRequestJSON = require('./sample_request.json');
var sampleResponseJSON = require('./sample_response.json');
var constants = require('../../lib/constants');
var logger = require('../../utils/logger');

/**
 * Test Data Provider
 */
var testData = (function () {

    /**
     * Generates a well-formed request
     * @param payload
     * @returns {*}
     */
    function formatRequest(payload) {
        return JSON.stringify({
            payload: payload,
            skip: 0,
            take: payload.length,
            totalRecords: payload.length
        });
    }

    /**
     * Extracts shows from sample request that match the given filter
     * @param filterFunction
     * @returns {*}
     */
    function getShows(filterFunction) {
        return _.select(sampleRequestJSON.payload, filterFunction);
    }

    return {
        sampleRequest: JSON.stringify(sampleRequestJSON),
        sampleResponse: JSON.stringify(sampleResponseJSON),
        emptyResponse: JSON.stringify({response: []}),
        requestWithEmptyPayload: formatRequest([]),
        requestWithJustOneShow: function () {
            return formatRequest([sampleRequestJSON.payload[0]]);
        },
        requestWithOnlyNonDRMShows: function () {
            return formatRequest(getShows(function (show) {
                return show.drm !== true;
            }));
        },
        requestWithOnlyZeroEpisodeShows: function () {
            return formatRequest(getShows(function (show) {
                return (show.episodeCount || 0) &lt; 1;
            }));
        },
        requestWithOnlyValidShows: function () {
            return formatRequest(getShows(function (show) {
                return show.episodeCount > 0 &amp;&amp; show.drm === true;
            }));
        },
        expectedJSONParseErrorMsg: JSON.stringify({error: constants.parseErrorMsg})
    };

}());

exports = module.exports = testData;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#app">app</a></li><li><a href="global.html#filter">filter</a></li><li><a href="global.html#getShowsWithDRMAndEpisodes">getShowsWithDRMAndEpisodes</a></li><li><a href="global.html#isValid">isValid</a></li><li><a href="global.html#request">request</a></li><li><a href="global.html#testData">testData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Mon Oct 12 2015 12:12:41 GMT+1100 (AUS Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
